/*! Quizz 05-02-2015 */
Parse.initialize("qJglDDzyCTc8qUB2Z5KdqvD5IUQmbUWiHJ0fNeIW","eRgIH4su5FsFRmPq2ubWTyBiiusqTrQygj7ZL6l9"),angular.module("Quizz",["ngRoute","xeditable","ngStorage","ui.bootstrap","pascalprecht.translate","ngAnimate"]),angular.module("Quizz").config(["$routeProvider","$translateProvider","ParseProvider",function(a,b,c){"use strict";a.when("/backoffice",{templateUrl:"views/backoffice.html",controller:"BackofficeCtrl"}).otherwise({redirectTo:"/backoffice"}),b.useStaticFilesLoader({prefix:"/data/",suffix:".json"}),b.preferredLanguage("en"),c.setRestAuth("qJglDDzyCTc8qUB2Z5KdqvD5IUQmbUWiHJ0fNeIW","n7CLyHtblSpx82CfpZRYZVfssiR2Vi0lmu62C1wv")}]),angular.module("Quizz").run(["editableOptions",function(a){"use strict";a.theme="bs3"}]),angular.module("Quizz").controller("BackofficeCtrl",["$scope","$filter","Question",function(a,b,c){"use strict";c.getQuestions().then(function(b){a.questions=b.data.result.data},function(a){console.log(a)}),a.addQuestion=function(){a.addingQuestion=!0,c.addQuestion({text:b("translate")("Type your question")}).then(function(b){a.questions.unshift(b.data.result.data),a.addingQuestion=!1},function(){a.addingQuestion=!1})},a.updateQuestion=function(a){return c.updateQuestion(a)},a.addChoice=function(a){a.$addingChoice=!0,c.addChoice({questionId:a.objectId,text:b("translate")("Type your choice")}).then(function(b){a.choices.push(b.data.result.data),delete a.$addingChoice},function(){delete a.$addingChoice})},a.updateChoice=function(a){return c.updateChoice(a)},a.deleteQuestion=function(b){c.deleteQuestion({questionId:b.objectId}).then(function(){a.questions.splice(a.questions.indexOf(b),1)},function(){})},a.deleteChoice=function(a,b){b.$deleted=!0,c.deleteChoice({choiceId:b.objectId}).then(function(){a.choices.splice(a.choices.indexOf(b),1)},function(){})},a.isMultichoice=function(a){var b=0;for(var c in a.choices)a.choices[c].scoring&&a.choices[c].scoring>0&&b++;return 1!==b}}]),angular.module("Quizz").controller("MenuCtrl",["$scope","$rootScope","$localStorage","$translate",function(a,b,c,d){"use strict";a.printing=!1,a.togglePrint=function(){a.printing=!a.printing,a.triggerAction("print")},a.triggerAction=function(a){b.$broadcast("menu-trigger",{action:a})},a.changeLang=function(a){d.use(a),c.language=a};var e=c.language;a.changeLang(e?e:navigator.language||navigator.userLanguage)}]),angular.module("Quizz").controller("MessageCtrl",["$scope","$timeout",function(a,b){"use strict";a.messages={},a.newMessage=function(c){var d=(new Date).getTime().toString(16).toUpperCase();a.messages[d]=angular.extend({uid:d},c),b(function(){a.destroy(d)},5e3)},a.destroy=function(b){a.messages[b]&&delete a.messages[b]},a.$on("display-message",function(b,c){console.log(c),a.newMessage(c)})}]),angular.module("Quizz").provider("Parse",[function(){var a,b;this.setRestAuth=function(c,d){b=c,a=d},this.$get=["$http",function(c){return function(d){return c({method:d.method,url:"https://api.parse.com/1/functions/"+d.resource,headers:{"X-Parse-Application-Id":b,"X-Parse-REST-API-Key":a},data:d.data})}}]}]),angular.module("Quizz").provider("Question",[function(){this.$get=["Parse",function(a){return{getQuestions:function(){return a({method:"POST",data:{},resource:"getQuestions"})},addQuestion:function(b){return a({method:"POST",data:b,resource:"addQuestion"})},updateQuestion:function(b){return a({method:"POST",data:b,resource:"updateQuestion"})},addChoice:function(b){return a({method:"POST",data:b,resource:"addChoice"})},updateChoice:function(b){return a({method:"POST",data:b,resource:"updateChoice"})},deleteQuestion:function(b){return a({method:"POST",data:b,resource:"deleteQuestion"})},deleteChoice:function(b){return a({method:"POST",data:b,resource:"deleteChoice"})}}}]}]);